-- =============================================
-- SalaryMonitor Test Data
-- =============================================

USE SalaryMonitor;
GO

-- =============================================
-- Склады
-- =============================================
INSERT INTO warehouses (code, name) VALUES
('01SS', 'СК Поларис'),
('02DQ', 'СК ДМ офисный товар'),
('02SR', 'РРЦ Южный Урал'),
('0SK1', 'СК Пермь'),
('0SK2', 'СК Омск'),
('0SK5', 'СК Новосибирск'),
('0SK6', 'СК Шушары'),
('0SK8', 'СК Урал-Каскад'),
('0SK9', 'СК Урал-Мебель'),
('RR04', 'РСД 4 ФУС');
GO

-- =============================================
-- Тестовые пользователи
-- =============================================
INSERT INTO users (employee_id, fio, warehouse_id, role) VALUES
('00000001', 'Иванов Иван Иванович', 1, 'employee'),
('00000002', 'Петров Петр Петрович', 1, 'employee'),
('00000003', 'Сидорова Мария Александровна', 1, 'employee'),
('00000099', 'Администратор Склад 1', 1, 'admin'),
('00000004', 'Козлов Андрей Владимирович', 2, 'employee'),
('00000098', 'Администратор Склад 2', 2, 'admin');
GO

-- =============================================
-- Тарифы (расценки)
-- =============================================
INSERT INTO tariffs (warehouse_code, operation_type, rate, norm_aei_per_hour, valid_from) VALUES
('01SS', 'Приемка', 0.50, 200, '2024-01-01'),
('01SS', 'Размещение', 0.45, 220, '2024-01-01'),
('01SS', 'Отборка', 0.60, 180, '2024-01-01'),
('01SS', 'Упаковка', 0.55, 190, '2024-01-01'),
('01SS', 'Отгрузка', 0.50, 200, '2024-01-01'),
('02DQ', 'Приемка', 0.48, 205, '2024-01-01'),
('02DQ', 'Размещение', 0.43, 225, '2024-01-01'),
('02DQ', 'Отборка', 0.58, 185, '2024-01-01'),
('02SR', 'Приемка', 0.52, 195, '2024-01-01'),
('02SR', 'Отборка', 0.62, 175, '2024-01-01');
GO

-- =============================================
-- Матрица качества
-- =============================================
INSERT INTO quality_matrix (errors_count, k_value, description) VALUES
(0, 1.0, 'Без ошибок'),
(1, 0.95, '1 ошибка'),
(2, 0.90, '2 ошибки'),
(3, 0.85, '3 ошибки'),
(4, 0.80, '4 ошибки'),
(5, 0.75, '5 ошибок'),
(6, 0.70, '6 ошибок'),
(7, 0.65, '7 ошибок'),
(8, 0.60, '8 ошибок'),
(9, 0.55, '9 ошибок'),
(10, 0.50, '10+ ошибок');
GO

-- =============================================
-- Тестовые операции (за последние 7 дней)
-- =============================================
DECLARE @i INT = 0;
DECLARE @user_id INT;
DECLARE @date DATE;

WHILE @i < 7
BEGIN
    SET @date = DATEADD(DAY, -@i, CAST(GETDATE() AS DATE));
    
    -- Операции для пользователя 1
    INSERT INTO operations (user_id, warehouse_code, operation_type, count, operation_date, amount)
    VALUES 
        (1, '01SS', 'Приемка', 150 + (@i * 10), @date, (150 + (@i * 10)) * 0.50),
        (1, '01SS', 'Размещение', 180 + (@i * 5), @date, (180 + (@i * 5)) * 0.45);
    
    -- Операции для пользователя 2
    INSERT INTO operations (user_id, warehouse_code, operation_type, count, operation_date, amount)
    VALUES 
        (2, '01SS', 'Отборка', 160 + (@i * 8), @date, (160 + (@i * 8)) * 0.60),
        (2, '01SS', 'Упаковка', 170 + (@i * 6), @date, (170 + (@i * 6)) * 0.55);
    
    -- Операции для пользователя 3
    INSERT INTO operations (user_id, warehouse_code, operation_type, count, operation_date, amount)
    VALUES 
        (3, '01SS', 'Приемка', 140 + (@i * 12), @date, (140 + (@i * 12)) * 0.50);
    
    SET @i = @i + 1;
END;
GO

PRINT 'Test data inserted successfully!';
PRINT '';
PRINT 'Test users:';
PRINT 'Employee ID: 00000001 (Иванов) - employee';
PRINT 'Employee ID: 00000002 (Петров) - employee';
PRINT 'Employee ID: 00000003 (Сидорова) - employee';
PRINT 'Employee ID: 00000099 (Администратор) - admin';

